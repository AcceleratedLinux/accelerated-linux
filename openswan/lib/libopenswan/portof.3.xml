<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"
                   "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
<!-- lifted from troff+man by doclifter -->
<refentry id='portof3'>
<refentryinfo><date>8 Sept 2000</date></refentryinfo>
<refmeta>
<refentrytitle>IPSEC_PORTOF</refentrytitle>
<manvolnum>3</manvolnum>
<refmiscinfo class='date'>8 Sept 2000</refmiscinfo>
</refmeta>
<refnamediv id='name'>
<refname>ipsec portof</refname>
<refname>ipsec setportof</refname>
<refname>ipsec sockaddrof</refname>
<refname>ipsec sockaddrlenof</refname>
<refpurpose>get port field of an ip_address, set port field of an ip_address, get pointer to internal sockaddr of an ip_address, get length of internal sockaddr of an ip_address</refpurpose>
</refnamediv>
<!-- body begins here -->
<refsynopsisdiv id='synopsis'>
<funcsynopsis>
<funcsynopsisinfo>
#include &lt;freeswan.h&gt;

</funcsynopsisinfo>
<funcprototype>
<funcdef>int <function>portof</function></funcdef>
    <paramdef>const ip_address * <parameter>src</parameter></paramdef>
</funcprototype>

<funcprototype>
<funcdef>void <function>setportof</function></funcdef>
    <paramdef>int <parameter>port</parameter></paramdef>
    <paramdef>ip_address * <parameter>dst</parameter></paramdef>
</funcprototype>

<funcprototype>
<funcdef>struct <function>sockaddr</function> *sockaddrof</funcdef>
    <paramdef>ip_address * <parameter>src</parameter></paramdef>
</funcprototype>

<funcprototype>
<funcdef>size_t <function>sockaddrlenof</function></funcdef>
    <paramdef>const ip_address * <parameter>src</parameter></paramdef>
</funcprototype>
</funcsynopsis>
</refsynopsisdiv>


<refsect1 id='description'><title>DESCRIPTION</title>
<para>The
<emphasis remap='B'>&lt;freeswan.h&gt;</emphasis>
internal type
<emphasis remap='I'>ip_address</emphasis>
contains one of the
<function>sockaddr</function>
types internally.
<emphasis remap='I'>Reliance on this feature is discouraged</emphasis>,
but it may occasionally be necessary.
These functions provide low-level tools for this purpose.</para>

<para><emphasis remap='I'>Portof</emphasis>
and
<function>setportof</function>
respectively read and write the port-number field of the internal
<function>sockaddr</function>.
The values are in network byte order.</para>

<para><emphasis remap='I'>Sockaddrof</emphasis>
returns a pointer to the internal
<function>sockaddr</function>,
for passing to other functions.</para>

<para><emphasis remap='I'>Sockaddrlenof</emphasis>
reports the size of the internal
<function>sockaddr</function>,
for use in storage allocation.</para>
</refsect1>

<refsect1 id='see_also'><title>SEE ALSO</title>
<para><citerefentry><refentrytitle>inet</refentrytitle><manvolnum>3</manvolnum></citerefentry>, <citerefentry><refentrytitle>ipsec_initaddr</refentrytitle><manvolnum>3</manvolnum></citerefentry></para>
</refsect1>

<refsect1 id='diagnostics'><title>DIAGNOSTICS</title>
<para><emphasis remap='I'>Portof</emphasis>
returns
<option>-1</option>,
<emphasis remap='I'>sockaddrof</emphasis>
returns
<emphasis remap='B'>NULL</emphasis>,
and
<function>sockaddrlenof</function>
returns
<literal>0</literal>
if an unknown address family is found within the
<emphasis remap='I'>ip_address</emphasis>.</para>
</refsect1>

<refsect1 id='history'><title>HISTORY</title>
<para>Written for the FreeS/WAN project by Henry Spencer.</para>
</refsect1>

<refsect1 id='bugs'><title>BUGS</title>
<para>These functions all depend on low-level details of the
<emphasis remap='I'>ip_address</emphasis>
type, which are in principle subject to change.
Avoid using them unless really necessary.</para>
</refsect1>
</refentry>

