OPENGEAR/IM7216
---------------

These notes are to assist in transitioning to running DAL firmware on
OpenGear/IM7216 platforms.


CONSOLE SETUP
-------------

The local console port (the RJ45 port marked "Console" on the front of
the unit) is the native CPU serial port. It is wired as a "Cisco Straight
(X2) pinout". The default is the usual 115200/8/1/n.

If you hold in the ERASE button on power up you will see the mini u-boot
messages. If you hit a key then you will enter the u-boot command mode.


NETWORK LOADING
---------------

With the serial console setup and at the u-boot prompt you can manually
network load a DAL firmware image. Run commands like this:

    dhcp 0x1000000 image.bin
    setenv bootargs "console=ttyS0,115200 root=/dev/ram0"
    gofsk 0x1000000

Note that the primary linux console remains on this designated console
serial port. So after booting linux you will be able to login on this
console port. On a typical silent boot (the default) the system will run
the usual login getty on this console port (and you won't see any of the
usual linux boot up trace here).

Although the boot loader of the IM7216 will try to network load when you
hold in the ERASE button at power up its u-boot commands are not quite
right to boot our new kernels. Thus you need to break into the u-boot command
line and issue the commands above. Specifically it is the load address that
causes problems. Loading at the default 0x800000 is not high enough in
memory for the initial boot kernel to not over-write into this region.


FLASHING IMAGE
--------------

The generated DAL firmware binary image is compatible with the OpenGear
firmware images. So you can flash in a DAL firmware image to replace the
existing OpenGear firmware.

From a shell login (when running DAL):

    netflash 192.168.210.2 image.bin

(Of course substituting appropriate server IP address in that netflash)


