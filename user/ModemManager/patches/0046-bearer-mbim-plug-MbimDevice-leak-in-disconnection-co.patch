From a0b7edeefaa0c07d6ac25d62e95d4e56fa4cee20 Mon Sep 17 00:00:00 2001
From: Aleksander Morgado <aleksander@aleksander.es>
Date: Thu, 11 Mar 2021 10:33:00 +0100
Subject: [PATCH] bearer-mbim: plug MbimDevice leak in disconnection context

(cherry picked from commit a772b70632008d6c375487a8e711b80bb343a931)
---
 src/mm-bearer-mbim.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/src/mm-bearer-mbim.c b/src/mm-bearer-mbim.c
index f98fff53..4a17b8f1 100644
--- a/src/mm-bearer-mbim.c
+++ b/src/mm-bearer-mbim.c
@@ -1189,6 +1189,7 @@ typedef struct {
 static void
 disconnect_context_free (DisconnectContext *ctx)
 {
+    g_object_unref (ctx->device);
     g_object_unref (ctx->data);
     g_slice_free (DisconnectContext, ctx);
 }
-- 
2.25.1

