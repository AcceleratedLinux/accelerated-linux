
LOGIN = login
LOGINOBJS = login.o

PASSWD = passwd
PASSWDOBJS = passwd.o

ifdef CONFIG_USER_ONLY_ROOT
CFLAGS += -DONLY_ALLOW_ROOT
endif
ifdef CONFIG_PROP_LOGIN_SECURITY_COUNT
CFLAGS += -DSECURITY_COUNTS
endif


all: $(LOGIN) $(PASSWD)

$(LOGIN): $(LOGINOBJS)
	$(CC) $(LDFLAGS) -o $@ $(LOGINOBJS) $(LIBCRYPT) $(LDLIBS$(LDLIBS_$@))

$(PASSWD): $(PASSWDOBJS)
	$(CC) $(LDFLAGS) -o $@ $(PASSWDOBJS) $(LIBCRYPT) $(LDLIBS)

romfs:
	$(ROMFSINST) -e CONFIG_USER_LOGIN_LOGIN /bin/login
	$(ROMFSINST) -e CONFIG_USER_LOGIN_PASSWD /bin/passwd

clean:
	-rm -f $(LOGIN) $(PASSWD) *.elf *.gdb *.o

