.\" ** You probably do not want to edit this file directly **
.\" It was generated using the DocBook XSL Stylesheets (version 1.69.1).
.\" Instead of manually editing it, you probably should edit the DocBook XML
.\" source for it and then use the DocBook XSL Stylesheets to regenerate it.
.TH "pwck" "8" "12/14/2005" "Команды управления системой" "Команды управления системой"
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.SH "НАЗВАНИЕ"
pwck \- проверяет целостность файлов паролей
.SH "СИНТАКСИС"
.HP 5
\fBpwck\fR [\-q] [\-s] [\fIpasswd\fR\ \fIshadow\fR]
.HP 5
\fBpwck\fR [\-q] [\-r] [\fIpasswd\fR\ \fIshadow\fR]
.SH "ОПИСАНИЕ"
.PP
\fBpwck\fR
проверяет целостность аутентификационной информации в системе. Во всех записях файлов
\fI/etc/passwd\fR
и
\fI/etc/shadow\fR
будут проверены правильность формата и допустимость данных каждого поля. Пользователю будет предложено удалить записи, которые имеют неправильный формат или содержащие неисправимые ошибки.
.PP
Выполняются следующие проверки:
.TP 3
\(bu
правильное количество полей
.TP
\(bu
уникальность имени пользователя
.TP
\(bu
допустимость идентификатора пользователя и группы
.TP
\(bu
допустимость первичной группы
.TP
\(bu
допустимость домашнего каталога
.TP
\(bu
допустимость регистрационной оболочки
.PP
Ошибки в количестве полей и уникальности имён пользователей невосстановимы. Если запись содержит неверное число полей, пользователя попросят подтвердить удаление всей записи. Если пользователь ответит отрицательно, дальнейшая проверка выполняться не будет. При ошибке повторения имени пользователя также возникает запрос на удаление, но в случае отказа проверка будет продолжена. Обо всех остальных ошибках выводится предупреждение и пользователю предлагается запустить команду
\fBusermod\fR
, чтобы исправить ошибку.
.PP
Команды, которые работают с файлом
\fI/etc/passwd\fR
не могут изменять повреждённые или дублирующиеся записи. Как раз в этом случае и нужно использовать
\fBpwck\fR
для удаления испорченной записи.
.SH "ПАРАМЕТРЫ"
.PP
Возможные параметры команды
\fBpwck\fR
:
.TP
\fB\-q\fR
Cообщать только об ошибках. Предупреждения, которые не требуют от пользователя никаких действий, показаны не будут.
.TP
\fB\-r\fR
Выполнять команду
\fBpwck\fR
в режиме "только чтение".
.TP
\fB\-s\fR
Отсортировать все записи в файлах
\fI/etc/passwd\fR
и
\fI/etc/shadow\fR
по числовому идентификатору пользователя.
.PP
По умолчанию, команда
\fBpwck\fR
работает с файлами
\fI/etc/passwd\fR
и
\fI/etc/shadow\fR. Пользователь может указать другие файлы с помощью параметров
\fIpasswd\fR
и
\fIshadow\fR.
.SH "ФАЙЛЫ"
.TP
\fI/etc/group\fR
содержит информацию о группах
.TP
\fI/etc/passwd\fR
содержит информацию о пользователях
.TP
\fI/etc/shadow\fR
содержит защищаемую информацию о пользователях
.SH "СМОТРИТЕ ТАКЖЕ"
.PP
\fBgroup\fR(5),
\fBpasswd\fR(5),
\fBshadow\fR(5),
\fBusermod\fR(8).
.SH "ВОЗВРАЩАЕМЫЕ ЗНАЧЕНИЯ"
.PP
Команда
\fBpwck\fR
завершая работу, возвращает следующие значения:
.TP
\fI0\fR
успешное выполнение
.TP
\fI1\fR
ошибка в параметрах командной строки
.TP
\fI2\fR
есть одна или более записей с недопустимыми паролями
.TP
\fI3\fR
не удалось открыть файл паролей
.TP
\fI4\fR
не удалось заблокировать файл паролей
.TP
\fI5\fR
не удалось изменить файл паролей

