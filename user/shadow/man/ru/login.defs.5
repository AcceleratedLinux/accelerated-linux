.\" ** You probably do not want to edit this file directly **
.\" It was generated using the DocBook XSL Stylesheets (version 1.69.1).
.\" Instead of manually editing it, you probably should edit the DocBook XML
.\" source for it and then use the DocBook XSL Stylesheets to regenerate it.
.TH "login.defs" "5" "11/10/2005" "Форматы файлов" "Форматы файлов"
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.SH "НАЗВАНИЕ"
login.defs \- файл конфигурации подсистемы теневых паролей
.SH "ОПИСАНИЕ"
.PP
Подсистема теневых паролей (shadow password suite) настраивается в файле
\fI/etc/login.defs\fR. Этот файл является обязательным. Отсутствие данного файла не повлияет на работу системы, но, вероятно, приведёт к выполнению нежелаемых операций.
.PP
Файл представляет собой обычный текстовый файл; каждая строка описывает один параметр конфигурации. Строка состоит из названия параметра и его значения, которые разделяются пробельным символом. Пустые строки и комментарии игнорируются. Комментарии начинаются со знака фунта `#', который должен быть первым непробельным символом в строке.
.PP
Значения параметров могут быть четырёх типов: строки, логические, числа и длинные числа. Строки состоят из любых печатных символов. Под логическими значениями подразумеваются \(lqyes\(rq или \(lqno\(rq. Неопределённый логический параметр или имеющий значение, отличное от указанных выше, считается как имеющий значение \(lqno\(rq. Числа (обычные и длинные) можно задавать в десятичной, восьмеричной (перед значением ставится \(lq0\(rq) или шестнадцатеричной (перед значением ставится \(lq0x\(rq) системах счисления. Максимальные значения параметра обычного и длинного числа зависят от архитектуры компьютера.
.PP
Возможны следующие параметры конфигурации:
.TP
CHFN_AUTH (логический)
Если установлено в
\fIyes\fR, то перед выполнением любых изменений программы
\fBchfn\fR
и
\fBchsh\fR
будут проводить аутентификацию, в случае если если команды не запущены суперпользователем.
.TP
CHFN_RESTRICT (строка)
В этом параметре указывается, какие части поля
\fIgecos\fR
из файла
\fI/etc/passwd\fR
могут изменять обычные пользователи с помощью программы
\fBchfn\fR. Строка может содержать любую комбинацию букв
\fIf\fR
,
\fIr\fR,
\fIw\fR,
\fIh\fR
для изменения полного имени пользователя, номера комнаты, рабочего и домашнего телефона соответственно. Для совместимости, значение "yes" эквивалентно "rwh" и "no" эквивалентно "frwh". Если ничего не задано, то только суперпользователь может выполнять любые изменения. Ещё более ограничительная настройка достигается снятием SUID бита с файла chfn.
.TP
CREATE_HOME (логический)
Этот параметр определяет, должна ли по умолчанию программа useradd создавать домашние каталоги пользователей. Данное значение будет логически сложено с флагом
\fB\-m\fR
, указываемом при запуске useradd.
.TP
GID_MAX (число), GID_MIN (число)
Диапазон идентификаторов групп, используемый в программах
\fBuseradd\fR
и
\fBgroupadd\fR.
.TP
MAIL_DIR (строка)
Системный почтовый каталог. Данный параметр нужен для управления почтовым ящиком при изменении или удалении учётной записи пользователя. Если параметр не задан, то используется значение указанное при сборке.
.TP
PASS_MAX_DAYS (число)
Максимальное число дней использования пароля. Если пароль старее этого числа, то будет запущена процедура смены пароля. Если значение не задано, то предполагается значение \-1 (то есть возможность ограничения не используется).
.TP
PASS_MIN_DAYS (число)
Максимальное число дней между изменениями пароля. Любая смена пароля ранее заданного срока выполнена не будет. Если значение не задано, то предполагается значение \-1 (то есть возможность ограничения не используется).
.TP
PASS_WARN_AGE (число)
Число дней за которое начнёт выдаваться предупреждение об устаревании пароля. Нулевое значение означает, что предупреждение выдаётся в день устаревания, при отрицательном значении предупреждение выдаваться не будет. Если значение не задано, выдача предупреждения отключается.
.PP
Параметры PASS_MAX_DAYS, PASS_MIN_DAYS и PASS_WARN_AGE используются только при создании учётной записи. Любые изменения этих параметров не влияют на уже существующие учётные записи.
.TP
UID_MAX (число), UID_MIN (число)
Диапазон идентификаторов пользователей, используемый программой
\fBuseradd\fR.
.TP
UMASK (число)
Задаёт начальное значение маски доступа. Если не указано, то маска доступа устанавливается в 077.
.TP
USERDEL_CMD (строка)
Определяет программу, которая будет запущена при удалении пользователя. Она должна удалять любые задания at/cron/печати удаляемого пользователя (передаётся в качестве первого аргумента).
.SH "ПЕРЕКРЁСТНАЯ ССЫЛКА"
.PP
Далее показано какие программы подсистемы теневых паролей используют данные параметры.
.TP
chfn
CHFN_AUTH CHFN_RESTRICT
.TP
chsh
CHFN_AUTH
.TP
groupadd
GID_MAX GID_MIN
.TP
newusers
PASS_MAX_DAYS PASS_MIN_DAYS PASS_WARN_AGE UMASK
.TP
pwconv
PASS_MAX_DAYS PASS_MIN_DAYS PASS_WARN_AGE
.TP
useradd
CREATE_HOME GID_MAX GID_MIN PASS_MAX_DAYS PASS_MIN_DAYS PASS_WARN_AGE UID_MAX UID_MIN UMASK
.TP
userdel
MAIL_DIR USERDEL_CMD
.TP
usermod
MAIL_DIR
.SH "ОШИБКИ"
.PP
Большинство функций подсистемы теневых паролей теперь реализовано через PAM. Поэтому, файл
\fI/etc/login.defs\fR
больше не используется программами:
\fBlogin\fR(1),
\fBpasswd\fR(1),
\fBsu\fR(1). Настройку данных программ следует выполнять в файлах конфигурации PAM.
.SH "СМОТРИТЕ ТАКЖЕ"
.PP
\fBlogin\fR(1),
\fBpasswd\fR(1),
\fBsu\fR(1),
\fBpasswd\fR(5),
\fBshadow\fR(5),
\fBpam\fR(8).
