<html> <head>
<title>4. Example programs</title>
<!-- $Id: cgihtml_4.html,v 1.5 1997/01/21 07:18:26 eekim Exp $ -->
</head>
<body bgcolor="#FFFFFF">

<h1>4. Example programs</h1>

[
<a href="cgihtml_5.html">Next</a> |
<a href="cgihtml.html">Up to Table of Contents</a> |
<a href="cgihtml_3.html">Previous</a>
]

<hr>
<a name="1">

<h2>4.1. test.cgi</h2>

<p>test.cgi is a simple test program.  It will display the CGI
environment, and if there is any input, it will parse and display
those values as well.</p>

<hr>
<a name="2">

<h2>4.2. query-results</h2>

<p>This is a generic forms parser which is useful for testing purposes.
It will parse both GET and POST forms successfully.  Simply call it
as the form "action", and it will return all of the names and associated
values entered by the user.</p>

<p>query-results also works from the command line.  For instance, if
you run query-results from the command line, you will see:</p>

<pre>
Content-type: text/html

&lt;html&gt; &lt;head&gt;
&lt;title&gt;Query Results&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;

--- cgihtml Interactive Mode ---
Enter CGI input string.  Remember to encode appropriate characters.
Press ENTER when done:

</pre>

<p>Suppose you enter the input string:</p>

<pre>
name=eugene&age=21
</pre>

<p>Then query-results will return:</p>

<pre>
 Input string: name=eugene&age=21
String length: 18
--- end cgihtml Interactive Mode ---

&lt;h1&gt;Query results&lt;/h1&gt;
&lt;dl&gt;
  &lt;dt&gt; &lt;b&gt;name&lt;/b&gt;
  &lt;dd&gt; eugene
  &lt;dt&gt; &lt;b&gt;age&lt;/b&gt;
  &lt;dd&gt; 21
&lt;/dl&gt;
&lt;/body&gt; &lt;/html&gt;
</pre>

<p>This feature is extremely useful if you are debugging code.
query-results will also handle file upload properly and
transparently.  It will save the file to the directory defined by
UPLOADDIR (/tmp by default).</p>

<hr>
<a name="3">

<h2>4.3. mail.cgi</h2>

<p>This is a generic comments program which will parse the form, check
to see if the intended recipient is a valid recipient, and send
the e-mail if so.</p>

<p>You will want to edit two things in the source file: <tt>WEBADMIN</tt>
and <tt>AUTH</tt>.  <tt>WEBADMIN</tt> is the complete e-mail address
to which the comments should be sent by default.  <tt>AUTH</tt> is
the exact location of the authorization file.</p>

<p>The authorization file is simple a text file with a list of valid
e-mail recipients.  Users will only be able to use this program
to send e-mail to those listed in the authorization file.  Your
file might look like this:</p>

<pre>
web@www.company.com
jschmoe@www.company.com
</pre>

<p>In the above case, you would only be able to send e-mail to
<tt>web@www.company.com</tt> and <tt>jschmoe@www.company.com</tt>.
Make sure you include the value of <tt>WEBADMIN</tt> in your
authorization file.</p>

<p>The following are valid variables in your form:</p>

<ul>
  <li> to
  <li> name
  <li> email
  <li> subject
  <li> content
</ul>

<p>If there is no <b>to</b> variable defined in the form, the mail will
be sent to <tt>WEBADMIN</tt> by default.  mail.cgi will reject
empty forms.</p>

<p>mail.cgi adds a "X-Sender:" header on each message so recipients know
that the message was sent by this program and not by a regular mail
client.</p>

<hr>
<a name="4">

<h2>4.4. index-sample.cgi</h2>

<p>Imagemaps have become increasingly popular to use on home pages.
Unfortunately, imagemaps are not lynx friendly; if you forget to include
some sort of text index as well, lynx users will not be able to access
any of your subpages.</p>

<p>You can circumvent this problem by using a CGI program as your home page
rather than an HTML page (or by using server-side includes).  This CGI
program will determine whether your browser is a graphics or text-browser.
If it is a text-browser, it will send a text HTML file, otherwise it will
send a graphics HTML file.</p>

<p>You will need to create two HTML files: a graphical and a text one.
Place the names of these files in the macros: TEXT_PAGE and IMAGE_PAGE.</p>

<hr>
<a name="5">

<h2>4.5. ignore.cgi</h2>

<p>Sends a status code of 204, signifying no content.  If you use
imagemaps, you can set "default" to /cgi-bin/ignore.cgi.  Whenever
someone clicks on a part of the picture which is undefined, the server
will just ignore the request.</p>

<hr>
[
<a href="cgihtml_5.html">Next</a> |
<a href="cgihtml.html">Up to Table of Contents</a> |
<a href="cgihtml_3.html">Previous</a>
]

<hr>
<address>
Copyright &#169; 1997 Eugene Eric Kim /
<a href="mailto:eekim@eekim.com">
eekim@eekim.com</a>
</address>
<!-- hhmts start -->
Last modified: Wed Jan  8 17:31:20 PST 1997
<!-- hhmts end -->
</body> </html>
